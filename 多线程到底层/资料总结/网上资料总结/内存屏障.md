#内存屏障
##volatile变量规则

定义：**对volatile变量的写入操作必须在对该变量的读操作之前执行。**  
作用：  
1.保持可见性  
2.禁用重排序（读操作禁止重排序之后的操作，写操作禁止重排序之前的操作）

##重排序
重排序并没有严格的定义。整体上可以分为两种：  
真·重排序：编译器、底层硬件（CPU等）出于“优化”的目的，按照某种规则将指令重新排序（尽管有时候看起来像乱序）。  
伪·重排序：由于缓存同步顺序等问题，看起来指令被重排序了。  

重排序问题无时无刻不在发生，源自三种场景：  
1.编译器编译时的优化  
2.处理器执行时的乱序优化  
3.缓存同步顺序（导致可见性问题）  

在编译器层面，仅将volatile作为标记使用，取消编译层面的缓存和重排序。  

reference:
1.https://www.jianshu.com/p/64240319ed60
